apiVersion: gateway.networking.k8s.io/v1
kind: Gateway
metadata:
  name: odh-gateway
  # The Gateway object must be created in the openshift-ingress namespace.
  namespace: openshift-ingress
  labels:
    app.kubernetes.io/name: odh-gateway
    app.kubernetes.io/component: gateway
    app.kubernetes.io/managed-by: opendatahub-operator
  annotations:
    opendatahub.io/managed: "true"
spec:
  gatewayClassName: odh-gateway-class
  listeners:
  #- name: http
  #  port: 80
  #  protocol: HTTP
  #  hostname: "*.odh.apps-crc.testing"
  #  allowedRoutes:
  #    namespaces:
  #      from: Selector
  #      selector:
  #        matchLabels:
  #          opendatahub.io/gateway-enabled: "true"
  - name: https
    port: 443
    protocol: HTTPS
    # hostname: "*.odh.apps-crc.testing"  # Commented out to allow any hostname (fixes SNI issues with oauth-proxy)
    tls:
      mode: Terminate
      certificateRefs:
      - name: odh-gateway-tls-secret
        kind: Secret
    allowedRoutes:
      namespaces:
        from: All
